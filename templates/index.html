<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Science Workbench | Flask AI Agent</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

</head>
<body>
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-button" id="mobileMenuButton" style="display: none;">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Sidebar Navigation -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <h2><i class="fas fa-brain"></i> <span>Data Science Workbench</span></h2>
    </div>
    
    <ul class="sidebar-menu">
      <li><a href="#" class="active"><i class="fas fa-home"></i> Dashboard</a></li>
      <li><a href="#upload"><i class="fas fa-upload"></i> Data Upload</a></li>
      <li><a href="#eda"><i class="fas fa-chart-bar"></i> EDA</a></li>
      <li><a href="#preprocess"><i class="fas fa-cogs"></i> Preprocessing</a></li>
      <li><a href="#feature-engineering"><i class="fas fa-wrench"></i> Feature Engineering</a></li>
      <li><a href="#train"><i class="fas fa-robot"></i> Model Training</a></li>
      <li><a href="#evaluate"><i class="fas fa-chart-line"></i> Model Evaluation</a></li>
      <li><a href="#predict"><i class="fas fa-magic"></i> Prediction</a></li>
      <li><a href="#deploy"><i class="fas fa-rocket"></i> Deployment</a></li>
      <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
      <li><a href="#"><i class="fas fa-question-circle"></i> Help</a></li>
    </ul>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
      <h1 class="title is-3 has-text-primary">SmartML Assistant</h1>
      <p class="subtitle is-5">End-to-end machine learning workflows simplified platform.</p>
      <div class="mt-4">
        <span class="feature-pill"><i class="fas fa-upload mr-1"></i> Data Upload</span>
        <span class="feature-pill"><i class="fas fa-chart-line mr-1"></i> EDA</span>
        <span class="feature-pill"><i class="fas fa-cogs mr-1"></i> Preprocessing</span>
        <span class="feature-pill"><i class="fas fa-wrench mr-1"></i> Feature Engineering</span>
        <span class="feature-pill"><i class="fas fa-robot mr-1"></i> Model Training</span>
        <span class="feature-pill"><i class="fas fa-magic mr-1"></i> Predictions</span>
        <span class="feature-pill"><i class="fas fa-rocket mr-1"></i> Deployment</span>
      </div>
    </div>

    <!-- Stats Overview -->
    <div class="columns is-multiline">
      <div class="column is-3">
        <div class="stat-card">
          <div class="stat-value" id="dataset-count">0</div>
          <div class="stat-label">Datasets</div>
        </div>
      </div>
      <div class="column is-3">
        <div class="stat-card">
          <div class="stat-value" id="model-count">0</div>
          <div class="stat-label">Trained Models</div>
        </div>
      </div>
      <div class="column is-3">
        <div class="stat-card">
          <div class="stat-value" id="process-count">0</div>
          <div class="stat-label">Processed Datasets</div>
        </div>
      </div>
      <div class="column is-3">
        <div class="stat-card">
          <div class="stat-value" id="prediction-count">0</div>
          <div class="stat-label">Predictions Made</div>
        </div>
      </div>
    </div>

    <!-- Progress Indicator -->
    <div class="progress-container" id="progressContainer">
      <div class="notification is-info is-light">
        <div class="level">
          <div class="level-left">
            <div class="level-item">
              Processing your request...
            </div>
          </div>
          <div class="level-right">
            <div class="level-item">
              <button class="delete" id="hideProgress"></button>
            </div>
          </div>
        </div>
      </div>
      <progress class="progress is-primary" max="100"></progress>
    </div>

    <!-- Upload Data Module -->
    <div class="module-card" id="upload">
      <div class="module-header">
        <p class="module-header-title">
          <span class="module-number">1</span>
          Upload Dataset
        </p>
        <span class="icon is-medium"><i class="fas fa-upload fa-lg"></i></span>
      </div>
      <div class="module-content">
        <p>Upload your dataset to get started. Supported formats: CSV, Excel, JSON</p>
        
        <form id="uploadForm" enctype="multipart/form-data">
          <div class="file has-name is-boxed is-fullwidth">
            <label class="file-label">
              <input class="file-input" type="file" name="file" required id="fileInput">
              <span class="file-cta">
                <span class="file-icon">
                  <i class="fas fa-cloud-upload-alt"></i>
                </span>
                <span class="file-label">
                  Choose a fileâ€¦
                </span>
              </span>
              <span class="file-name" id="fileName">
                No file selected
              </span>
            </label>
          </div>
          
          <div class="field">
            <label class="label">Dataset Name</label>
            <div class="control">
              <input class="input" type="text" placeholder="Custom name for your dataset (optional)" id="datasetName">
            </div>
          </div>
          
          <button class="button is-primary mt-4" type="submit" id="uploadButton">
            <span class="icon"><i class="fas fa-upload"></i></span>
            <span>Upload Dataset</span>
          </button>
        </form>
        
        <div class="result-container" id="uploadResult"></div>
      </div>
    </div>

    <!-- EDA Module -->
    <div class="module-card" id="eda">
      <div class="module-header">
        <p class="module-header-title">
          <span class="module-number">2</span>
          Exploratory Data Analysis
        </p>
        <span class="icon is-medium"><i class="fas fa-chart-bar fa-lg"></i></span>
      </div>
      <div class="module-content">
        <p>Analyze your dataset to understand its structure, statistics, and properties.</p>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Select Dataset</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="edaDatasetSelector" onchange="updateEDADataset()">
                  <option value="">Select a dataset</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-field">
            <label class="label">Analysis Type</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="analysisType">
                  <option value="summary">Summary Statistics</option>
                  <option value="correlation">Correlation Matrix</option>
                  <option value="distribution">Distribution Analysis</option>
                  <option value="missing">Missing Values Analysis</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <button class="button is-link" onclick="runEDA()" id="runEDAButton">
          <span class="icon"><i class="fas fa-chart-line"></i></span>
          <span>Run EDA</span>
        </button>
        
        <div class="result-container" id="edaResult">
          <!-- EDA results will be displayed here in table format -->
        </div>
      </div>
    </div>

    <!-- Preprocessing Module -->
    <div class="module-card" id="preprocess">
      <div class="module-header">
        <p class="module-header-title">
          <span class="module-number">3</span>
          Data Preprocessing
        </p>
        <span class="icon is-medium"><i class="fas fa-cogs fa-lg"></i></span>
      </div>
      <div class="module-content">
        <p>Clean and prepare your data for machine learning modeling.</p>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Select Dataset</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="preprocessDatasetSelector">
                  <option value="">Select a dataset</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Missing Values Strategy</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="missing_strategy">
                  <option value="mean">Mean Imputation</option>
                  <option value="median">Median Imputation</option>
                  <option value="most_frequent">Most Frequent</option>
                  <option value="drop">Drop Rows with Missing Values</option>
                  <option value="interpolate">Interpolation</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="label">Feature Scaling</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="scaler">
                  <option value="none">No Scaling</option>
                  <option value="standard">Standard Scaler</option>
                  <option value="minmax">MinMax Scaler</option>
                  <option value="robust">Robust Scaler</option>
                  <option value="normalize">Normalization</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Outlier Handling</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="outlier_method">
                  <option value="none">No Outlier Handling</option>
                  <option value="clip">Clipping</option>
                  <option value="remove">Remove Outliers</option>
                  <option value="transform">Transformations</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-field">
            <label class="label">Categorical Encoding</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="encoding_method">
                  <option value="none">No Encoding</option>
                  <option value="onehot">One-Hot Encoding</option>
                  <option value="label">Label Encoding</option>
                  <option value="ordinal">Ordinal Encoding</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <button class="button is-info" type="submit" id="preprocessButton">
          <span class="icon"><i class="fas fa-broom"></i></span>
          <span>Preprocess Data</span>
        </button>
        
        <div class="result-container" id="preprocessResult"></div>
      </div>
    </div>

    <!-- Feature Engineering Module -->
    <div class="module-card" id="feature-engineering">
      <div class="module-header">
        <p class="module-header-title">
          <span class="module-number">4</span>
          Feature Engineering
        </p>
        <span class="icon is-medium"><i class="fas fa-wrench fa-lg"></i></span>
      </div>
      <div class="module-content">
        <p>Create new features and transform existing ones to improve model performance.</p>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Select Dataset</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="featureDatasetSelector">
                  <option value="">Select a dataset</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Feature Generation</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="feature_generation">
                  <option value="none">No Generation</option>
                  <option value="polynomial">Polynomial Features</option>
                  <option value="interaction">Interaction Terms</option>
                  <option value="datetime">Date/Time Features</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="label">Feature Selection</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="feature_selection">
                  <option value="none">No Selection</option>
                  <option value="variance">Variance Threshold</option>
                  <option value="kbest">SelectKBest</option>
                  <option value="rfe">Recursive Feature Elimination</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Dimensionality Reduction</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="dimensionality_reduction">
                  <option value="none">No Reduction</option>
                  <option value="pca">Principal Component Analysis (PCA)</option>
                  <option value="lda">Linear Discriminant Analysis (LDA)</option>
                  <option value="tsne">t-SNE</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <button class="button is-info" type="submit" id="featureEngineeringButton">
          <span class="icon"><i class="fas fa-plus-circle"></i></span>
          <span>Apply Feature Engineering</span>
        </button>
        
        <div class="result-container" id="featureEngineeringResult"></div>
      </div>
    </div>

    <!-- Training Module -->
    <div class="module-card" id="train">
      <div class="module-header">
        <p class="module-header-title">
          <span class="module-number">5</span>
          Model Training
        </p>
        <span class="icon is-medium"><i class="fas fa-robot fa-lg"></i></span>
      </div>
      <div class="module-content">
        <p>Train a machine learning model on your preprocessed dataset.</p>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Select Dataset</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="trainDatasetSelector" onchange="updateTargetColumnOptions()">
                  <option value="">Select a dataset</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-field">
            <label class="label">Select Target Column</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="targetColumnSelector" name="target">
                  <option value="">Select target column</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Algorithm</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="algorithm">
                  <option value="logistic_regression">Logistic Regression</option>
                  <option value="random_forest">Random Forest</option>
                  <option value="xgboost">XGBoost</option>
                  <option value="svm">Support Vector Machine</option>
                  <option value="decision_tree">Decision Tree</option>
                  <option value="knn">K-Nearest Neighbors</option>
                  <option value="neural_network">Neural Network</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="label">Test Size</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="test_size">
                  <option value="0.2">20%</option>
                  <option value="0.25">25%</option>
                  <option value="0.3">30%</option>
                  <option value="0.15">15%</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Cross-Validation</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="cross_validation">
                  <option value="none">No Cross-Validation</option>
                  <option value="5">5-Fold</option>
                  <option value="10">10-Fold</option>
                  <option value="stratified">Stratified K-Fold</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-field">
            <label class="label">Hyperparameter Tuning</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="hyperparameter_tuning">
                  <option value="none">No Tuning</option>
                  <option value="grid">Grid Search</option>
                  <option value="random">Random Search</option>
                  <option value="bayesian">Bayesian Optimization</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <button class="button is-success" type="submit" id="trainButton">
          <span class="icon"><i class="fas fa-graduation-cap"></i></span>
          <span>Train Model</span>
        </button>
        
        <div class="result-container" id="trainResult"></div>
      </div>
    </div>

    <!-- Model Evaluation Module -->
    <div class="module-card" id="evaluate">
      <div class="module-header">
        <p class="module-header-title">
          <span class="module-number">6</span>
          Model Evaluation
        </p>
        <span class="icon is-medium"><i class="fas fa-chart-line fa-lg"></i></span>
      </div>
      <div class="module-content">
        <p>Evaluate your trained models with various metrics and visualization tools.</p>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Select Model</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="modelSelector">
                  <option value="">Select a model</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-field">
            <label class="label">Evaluation Dataset</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="evaluationDatasetSelector">
                  <option value="">Select a dataset</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Evaluation Metrics</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="evaluation_metrics" multiple size="3">
                  <option value="accuracy">Accuracy</option>
                  <option value="precision">Precision</option>
                  <option value="recall">Recall</option>
                  <option value="f1">F1 Score</option>
                  <option value="roc_auc">ROC AUC</option>
                  <option value="confusion_matrix">Confusion Matrix</option>
                </select>
              </div>
            </div>
            <p class="help">Hold Ctrl/Cmd to select multiple metrics</p>
          </div>
          
          <div class="form-field">
            <label class="label">Visualization</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="visualization">
                  <option value="none">No Visualization</option>
                  <option value="roc_curve">ROC Curve</option>
                  <option value="precision_recall">Precision-Recall Curve</option>
                  <option value="feature_importance">Feature Importance</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <button class="button is-info" type="submit" id="evaluateButton">
          <span class="icon"><i class="fas fa-chart-bar"></i></span>
          <span>Evaluate Model</span>
        </button>
        
        <div class="result-container" id="evaluateResult"></div>
      </div>
    </div>

    <!-- Prediction Module -->
    <div class="module-card" id="predict">
      <div class="module-header">
        <p class="module-header-title">
          <span class="module-number">7</span>
          Prediction
        </p>
        <span class="icon is-medium"><i class="fas fa-magic fa-lg"></i></span>
      </div>
      <div class="module-content">
        <p>Use a trained model to make predictions on new data.</p>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Select Model</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="predictModelSelector">
                  <option value="">Select a model</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Input Data Format</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="inputFormatSelector" onchange="toggleInputFormat()">
                  <option value="json">JSON Format</option>
                  <option value="form">Form Input</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div id="jsonInput">
          <div class="field">
            <label class="label">Input Data (JSON format)</label>
            <div class="control">
              <textarea name="input_data" class="textarea" placeholder='{"feature1": 1, "feature2": 2}' required rows="4"></textarea>
            </div>
            <p class="help">Enter feature values in JSON format</p>
          </div>
        </div>
        
        <div id="formInput" style="display: none;">
          <div class="field">
            <label class="label">Input Values</label>
            <div id="featureInputs">
              <p class="help">Select a model first to see feature inputs</p>
            </div>
          </div>
        </div>

        <button class="button is-warning" type="submit" id="predictButton">
          <span class="icon"><i class="fas fa-bolt"></i></span>
          <span>Generate Prediction</span>
        </button>
        
        <div class="result-container" id="predictResult"></div>
      </div>
    </div>

    <!-- Deployment Module -->
    <div class="module-card" id="deploy">
      <div class="module-header">
        <p class="module-header-title">
          <span class="module-number">8</span>
          Model Deployment
        </p>
        <span class="icon is-medium"><i class="fas fa-rocket fa-lg"></i></span>
      </div>
      <div class="module-content">
        <p>Deploy your trained model as a REST API endpoint for production use.</p>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Select Model</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="deployModelSelector">
                  <option value="">Select a model</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label class="label">Deployment Platform</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="deployment_platform">
                  <option value="flask">Flask API</option>
                  <option value="fastapi">FastAPI</option>
                  <option value="aws">AWS SageMaker</option>
                  <option value="azure">Azure ML</option>
                  <option value="gcp">Google AI Platform</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-field">
            <label class="label">API Authentication</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="api_authentication">
                  <option value="none">No Authentication</option>
                  <option value="api_key">API Key</option>
                  <option value="jwt">JWT Tokens</option>
                  <option value="oauth">OAuth 2.0</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <div class="field">
          <label class="label">Endpoint Name</label>
          <div class="control">
            <input class="input" type="text" placeholder="my-model-endpoint" name="endpoint_name">
          </div>
        </div>

        <button class="button is-danger" type="submit" id="deployButton">
          <span class="icon"><i class="fas fa-rocket"></i></span>
          <span>Deploy Model</span>
        </button>
        
        <div class="result-container" id="deployResult"></div>
      </div>
    </div>
  </main>


<script src="static/js/script.js"></script>
</body>
</html>